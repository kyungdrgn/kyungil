<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🤖Dev_Docs</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #121212; /* 다크모드 배경색 */
            color: #e0e0e0; /* 텍스트 색상 */
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            margin-bottom: 10px;
        }

        a {
            text-decoration: none;
            color: #bb86fc; /* 링크 색상 */
        }

        a:hover {
            text-decoration: underline;
            color: #7c4dff; /* 호버 시 색상 */
        }
    </style>
</head>
<body>
    <h1>🤖Dev_Docs</h1>
    <ul id="doc-list">
        <li>문서 목록을 불러오는 중...</li>
    </ul>

    <script>
        const owner = 'kyungdrgn';
        const repo = 'kyungil';
        const docPath = 'docs'; // 문서가 있는 디렉토리 경로
        const docsListFile = 'docs/docs-list.json'; // 새로 추가할 문서 목록 파일

        async function fetchDocs() {
            const docList = document.getElementById('doc-list');
            docList.innerHTML = ''; // 기존 목록 초기화

            try {
                // 1. GitHub Pages에서 미리 생성된 문서 목록 JSON 파일 가져오기
                const docsListUrl = `https://${owner}.github.io/${repo}/${docsListFile}`;
                const response = await fetch(docsListUrl);

                if (!response.ok) {
                    throw new Error(`Failed to fetch docs list: ${response.status} ${response.statusText}`);
                }
                const htmlFiles = await response.json(); // JSON 파싱

                if (htmlFiles.length === 0) {
                    docList.innerHTML = '<li>문서가 없습니다.</li>';
                    return;
                }

                // 각 HTML 파일의 정보를 사용하여 목록 생성
                for (const fileInfo of htmlFiles) {
                    const docUrl = `https://${owner}.github.io/${repo}/${docPath}/${fileInfo.filename}`;
                    
                    const listItem = document.createElement('li');
                    const link = document.createElement('a');
                    link.href = docUrl;
                    link.textContent = fileInfo.title; // JSON 파일에서 제목 사용
                    listItem.appendChild(link);
                    docList.appendChild(listItem);
                }
            } catch (error) {
                console.error('문서 목록을 불러오는 중 오류 발생:', error);
                docList.innerHTML = '<li>문서 목록을 불러올 수 없습니다. 오류를 콘솔에서 확인하세요.</li>';
            }
        }

        // 페이지 로드 시 문서 목록 가져오기
        document.addEventListener('DOMContentLoaded', fetchDocs);
    </script>
</body>
</html>