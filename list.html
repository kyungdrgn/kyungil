<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤–Dev_Docs</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #121212; /* ë‹¤í¬ëª¨ë“œ ë°°ê²½ìƒ‰ */
            color: #e0e0e0; /* í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            margin-bottom: 10px;
        }

        a {
            text-decoration: none;
            color: #bb86fc; /* ë§í¬ ìƒ‰ìƒ */
        }

        a:hover {
            text-decoration: underline;
            color: #7c4dff; /* í˜¸ë²„ ì‹œ ìƒ‰ìƒ */
        }
    </style>
</head>
<body>
    <h1>ğŸ¤–Dev_Docs</h1>
    <ul id="doc-list">
        <li>ë¬¸ì„œ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</li>
    </ul>

    <script>
        const owner = 'kyungdrgn';
        const repo = 'kyungil';
        const docPath = 'docs'; // ë¬¸ì„œê°€ ìˆëŠ” ë””ë ‰í† ë¦¬ ê²½ë¡œ

        async function fetchDocs() {
            const docList = document.getElementById('doc-list');
            docList.innerHTML = ''; // ê¸°ì¡´ ëª©ë¡ ì´ˆê¸°í™”

            try {
                // 1. GitHub APIë¥¼ ì‚¬ìš©í•˜ì—¬ /docs ë””ë ‰í† ë¦¬ì˜ íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
                const apiUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${docPath}`;
                const response = await fetch(apiUrl);
                if (!response.ok) {
                    throw new Error(`GitHub API Error: ${response.status} ${response.statusText}`);
                }
                const files = await response.json();

                // HTML íŒŒì¼ë§Œ í•„í„°ë§
                const htmlFiles = files.filter(file => file.type === 'file' && file.name.endsWith('.html'));

                if (htmlFiles.length === 0) {
                    docList.innerHTML = '<li>ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
                    return;
                }

                // ê° HTML íŒŒì¼ì˜ ì œëª© ê°€ì ¸ì˜¤ê¸°
                for (const file of htmlFiles) {
                    const docUrl = `https://${owner}.github.io/${repo}/${docPath}/${file.name}`; // GitHub Pages URL
                    
                    try {
                        const docResponse = await fetch(docUrl);
                        if (!docResponse.ok) {
                            console.error(`Failed to fetch document: ${docUrl}, Status: ${docResponse.status}`);
                            continue; // ë‹¤ìŒ íŒŒì¼ë¡œ ë„˜ì–´ê°
                        }
                        const docText = await docResponse.text();
                        
                        // DOMParserë¥¼ ì‚¬ìš©í•˜ì—¬ HTML íŒŒì‹± ë° title íƒœê·¸ ì¶”ì¶œ
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(docText, 'text/html');
                        const titleElement = doc.querySelector('title');
                        const title = titleElement ? titleElement.textContent : file.name.replace('.html', ''); // titleì´ ì—†ìœ¼ë©´ íŒŒì¼ ì´ë¦„ ì‚¬ìš©

                        const listItem = document.createElement('li');
                        const link = document.createElement('a');
                        link.href = docUrl;
                        link.textContent = title;
                        listItem.appendChild(link);
                        docList.appendChild(listItem);

                    } catch (docFetchError) {
                        console.error(`Error fetching or parsing document ${file.name}:`, docFetchError);
                        const listItem = document.createElement('li');
                        listItem.textContent = `${file.name} (ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨)`;
                        docList.appendChild(listItem);
                    }
                }
            } catch (error) {
                console.error('ë¬¸ì„œ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                docList.innerHTML = '<li>ë¬¸ì„œ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì˜¤ë¥˜ë¥¼ ì½˜ì†”ì—ì„œ í™•ì¸í•˜ì„¸ìš”.</li>';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
        document.addEventListener('DOMContentLoaded', fetchDocs);
    </script>
</body>
</html>